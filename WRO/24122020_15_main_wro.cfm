<!-- Description : Main WRO
Developer: UÄŸur Hamurpet
Company : Workcube
Destination: Main -->

<querytag>      
    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='SETUP_ACTIVITY' AND COLUMN_NAME='IS_IN' )
    BEGIN   
        ALTER TABLE SETUP_ACTIVITY ADD IS_IN bit NULL 
    END;

    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='SETUP_ACTIVITY' AND COLUMN_NAME='CODE' )
    BEGIN   
        ALTER TABLE SETUP_ACTIVITY ADD CODE nvarchar(50) NULL 
    END;

    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='SETUP_ACTIVITY' AND COLUMN_NAME='IS_OUT' )
    BEGIN   
        ALTER TABLE SETUP_ACTIVITY ADD IS_OUT bit NULL 
    END;

    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='DEPARTMENT' AND COLUMN_NAME='POINT_MULTIPLIER' )
    BEGIN   
        ALTER TABLE DEPARTMENT ADD POINT_MULTIPLIER float NULL 
    END;

    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='COMPANY' AND COLUMN_NAME='PAYMENT_GROUP_ID' )
    BEGIN   
        ALTER TABLE COMPANY ADD PAYMENT_GROUP_ID int NULL 
    END;

    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='EMPLOYEES_IN_OUT' AND COLUMN_NAME='MONTHLY_AVERAGE_NET' )
    BEGIN   
        ALTER TABLE EMPLOYEES_IN_OUT ADD MONTHLY_AVERAGE_NET float NULL 
    END;

    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='NOTES' AND COLUMN_NAME='ALERT_DATE' )
    BEGIN   
        ALTER TABLE NOTES ADD ALERT_DATE datetime NULL 
    END;

    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='VISITOR_BOOK' AND COLUMN_NAME='RECORD_EMP' )
    BEGIN   
        ALTER TABLE VISITOR_BOOK ADD RECORD_EMP int NULL 
    END;

    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='VISITOR_BOOK' AND COLUMN_NAME='RECORD_IP' )
    BEGIN   
        ALTER TABLE VISITOR_BOOK ADD RECORD_IP nvarchar(50) NULL 
    END;

    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='VISITOR_BOOK' AND COLUMN_NAME='UPDATE_DATE' )
    BEGIN   
        ALTER TABLE VISITOR_BOOK ADD UPDATE_DATE datetime NULL 
    END;

    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='VISITOR_BOOK' AND COLUMN_NAME='UPDATE_IP' )
    BEGIN   
        ALTER TABLE VISITOR_BOOK ADD UPDATE_IP nvarchar(50) NULL 
    END;

    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='VISITOR_BOOK' AND COLUMN_NAME='RECORD_DATE' )
    BEGIN   
        ALTER TABLE VISITOR_BOOK ADD RECORD_DATE datetime NULL 
    END;

    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='VISITOR_BOOK' AND COLUMN_NAME='UPDATE_EMP' )
    BEGIN   
        ALTER TABLE VISITOR_BOOK ADD UPDATE_EMP int NULL 
    END;

    IF NOT EXISTS(SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_main_@' and TABLE_NAME='ASSET' AND COLUMN_NAME='PASSWORD' )
    BEGIN   
        ALTER TABLE ASSET ADD PASSWORD nvarchar(50) NULL 
    END;
    
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'PAYROLL_JOB' AND TABLE_SCHEMA = '@_dsn_main_@')
    BEGIN
        CREATE TABLE [PAYROLL_JOB](	  
            [PAYROLL_ID] int NOT NULL IDENTITY(1,1), 
            [MONTH] int NULL, 
            [YEAR] int NULL, 
            [BRANCH_ID] int NULL, 
            [EMPLOYEE_ID] int NULL, 
            [IN_OUT_ID] int NULL,
            [EMPLOYEE_PAYROLL_ID] int NULL,
            [BRANCH_PAYROLL_ID] int NULL, 
            [PERCENT_COMPLETED] bit NULL, 
            [PAYROLL_DRAFT] nvarchar(MAX) NULL, 
            [ACCOUNT_DRAFT] nvarchar(MAX) NULL, 
            [ACCOUNT_COMPLETED] bit NULL, 
            [BUDGET_DRAFT] varchar(MAX) NULL, 
            [BUDGET_COMPLETED] bit NULL, 
            [BANK_DRAFT] varchar(MAX) NULL, 
            [BANK_COMPLETED] bit NULL, 
            CONSTRAINT [PK_PAYROLL_JOB] PRIMARY KEY ([PAYROLL_ID] ASC)
        );
    END;

    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'WATALOGY_GOOGLE_PRODUCT_CAT' AND TABLE_SCHEMA = '@_dsn_main_@')
    BEGIN
        CREATE TABLE [WATALOGY_GOOGLE_PRODUCT_CAT](	  
            [GOOGLE_PRODUCT_CAT_ID] float NULL, 
            [CATEGORY1] nvarchar(255) NULL, 
            [CATEGORY2] nvarchar(255) NULL, 
            [CATEGORY3] nvarchar(255) NULL, 
            [CATEGORY4] nvarchar(255) NULL, 
            [CATEGORY5] nvarchar(255) NULL,
            [CATEGORY6] nvarchar(255) NULL, 
            [CATEGORY7] nvarchar(255) NULL, 
            [WATALOGY_PRODUCT_CAT_ID] int NOT NULL IDENTITY(1,1), 
            CONSTRAINT [PK_WATALOGY_GOOGLE_PRODUCT_CAT] PRIMARY KEY ([WATALOGY_PRODUCT_CAT_ID] ASC)
        );
    END;
</querytag>