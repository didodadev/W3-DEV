<!-- Description : Holistic.22.1 period objects
Developer: UÄŸur Hamurpet
Company : Workcube
Destination: Period-->
<querytag>
    IF EXISTS(SELECT 'Y' FROM sys.indexes WHERE name='NCL_SHIP_ROW_1' AND object_id = OBJECT_ID('@_dsn_period_@.SHIP_ROW'))
    BEGIN
        DROP INDEX [NCL_SHIP_ROW_1] ON [SHIP_ROW];
    END;
    IF EXISTS(SELECT 'Y' FROM sys.indexes WHERE name='NCL_SHIP_ROW_2' AND object_id = OBJECT_ID('@_dsn_period_@.SHIP_ROW'))
    BEGIN
        DROP INDEX [NCL_SHIP_ROW_2] ON [SHIP_ROW];
    END;
    IF EXISTS(SELECT 'Y' FROM sys.indexes WHERE name='NCL_SHIP_ROW_3' AND object_id = OBJECT_ID('@_dsn_period_@.SHIP_ROW'))
    BEGIN
        DROP INDEX [NCL_SHIP_ROW_3] ON [SHIP_ROW];
    END;
    IF EXISTS(SELECT 'Y' FROM sys.indexes WHERE name='NCL_SHIP_ROW_4' AND object_id = OBJECT_ID('@_dsn_period_@.SHIP_ROW'))
    BEGIN
        DROP INDEX [NCL_SHIP_ROW_4] ON [SHIP_ROW];
    END;
    IF EXISTS(SELECT 'Y' FROM sys.indexes WHERE name='NCL_SHIP_ROW_5' AND object_id = OBJECT_ID('@_dsn_period_@.SHIP_ROW'))
    BEGIN
        DROP INDEX [NCL_SHIP_ROW_5] ON [SHIP_ROW];
    END;
    IF EXISTS(SELECT 'Y' FROM sys.indexes WHERE name='NCL_SHIP_ROW_6' AND object_id = OBJECT_ID('@_dsn_period_@.SHIP_ROW'))
    BEGIN
        DROP INDEX [NCL_SHIP_ROW_6] ON [SHIP_ROW];
    END;
    IF EXISTS(SELECT 'Y' FROM sys.indexes WHERE name='NCL_SHIP_ROW_7' AND object_id = OBJECT_ID('@_dsn_period_@.SHIP_ROW'))
    BEGIN
        DROP INDEX [NCL_SHIP_ROW_7] ON [SHIP_ROW];
    END;
    IF EXISTS(SELECT 'Y' FROM sys.indexes WHERE name='NCL_SHIP_ROW_8' AND object_id = OBJECT_ID('@_dsn_period_@.SHIP_ROW'))
    BEGIN
        DROP INDEX [NCL_SHIP_ROW_8] ON [SHIP_ROW];
    END;
    IF EXISTS(SELECT 'Y' FROM sys.indexes WHERE name='NCL_SHIP_ROW_9' AND object_id = OBJECT_ID('@_dsn_period_@.SHIP_ROW'))
    BEGIN
        DROP INDEX [NCL_SHIP_ROW_9] ON [SHIP_ROW];
    END;

    IF EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'SHIP_ROW' AND COLUMN_NAME = 'GTIP_NUMBER')
    BEGIN
        ALTER TABLE SHIP_ROW ALTER COLUMN GTIP_NUMBER nvarchar(100) NULL;
    END;

    CREATE NONCLUSTERED INDEX [NCL_SHIP_ROW_1] ON [SHIP_ROW] ([SHIP_ROW_ID] ASC) 
    CREATE NONCLUSTERED INDEX [NCL_SHIP_ROW_2] ON [SHIP_ROW] ([PRODUCT_ID] ASC,[SHIP_ID] ASC) 
    CREATE NONCLUSTERED INDEX [NCL_SHIP_ROW_3] ON [SHIP_ROW] ([SHIP_DATE] DESC) 
    CREATE NONCLUSTERED INDEX [NCL_SHIP_ROW_4] ON [SHIP_ROW] ([STOCK_ID] ASC) 
    CREATE NONCLUSTERED INDEX [NCL_SHIP_ROW_5] ON [SHIP_ROW] ([AMOUNT] ASC) 
    CREATE NONCLUSTERED INDEX [NCL_SHIP_ROW_6] ON [SHIP_ROW] ([ROW_ORDER_ID] DESC) 
    CREATE NONCLUSTERED INDEX [NCL_SHIP_ROW_7] ON [SHIP_ROW] ([SERVICE_ID] DESC) 
    CREATE NONCLUSTERED INDEX [NCL_SHIP_ROW_8] ON [SHIP_ROW] ([WRK_ROW_RELATION_ID] ASC,[SHIP_ID] ASC) 
    CREATE NONCLUSTERED INDEX [NCL_SHIP_ROW_9] ON [SHIP_ROW] ([WRK_ROW_ID] ASC)

    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'ESHIPMENT_RELATION' AND COLUMN_NAME = 'RECEIPMENT_ID')
    BEGIN
        ALTER TABLE ESHIPMENT_RELATION ADD RECEIPMENT_ID nvarchar(250) NULL;
    END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'ESHIPMENT_RELATION' AND COLUMN_NAME = 'RECEIPMENT_UUID')
    BEGIN
        ALTER TABLE ESHIPMENT_RELATION ADD RECEIPMENT_UUID nvarchar(250) NULL;
    END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'SHIP_RESULT' AND COLUMN_NAME = 'SERVICE_CONSUMER_MEMBER_ID')
    BEGIN
        ALTER TABLE SHIP_RESULT ADD SERVICE_CONSUMER_MEMBER_ID int NULL;
    END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'SHIP_RESULT' AND COLUMN_NAME = 'SERVICE_CONSUMER_ID')
    BEGIN
        ALTER TABLE SHIP_RESULT ADD SERVICE_CONSUMER_ID int NULL;
    END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'STOCK_EXCHANGE' AND COLUMN_NAME = 'AMOUNT2')
    BEGIN
        ALTER TABLE STOCK_EXCHANGE ADD AMOUNT2 float NULL;
    END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'STOCK_EXCHANGE' AND COLUMN_NAME = 'EXIT_AMOUNT2')
    BEGIN
        ALTER TABLE STOCK_EXCHANGE ADD EXIT_AMOUNT2 float NULL;
    END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'EXPENSE_RESERVED_ROWS' AND COLUMN_NAME = 'PROCESS_CAT')
    BEGIN
        ALTER TABLE EXPENSE_RESERVED_ROWS ADD PROCESS_CAT int NULL;
    END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'EXPENSE_ITEMS_ROWS' AND COLUMN_NAME = 'IS_INVENTORY_ASSET_VALUATION')
    BEGIN
        ALTER TABLE EXPENSE_ITEMS_ROWS ADD IS_INVENTORY_ASSET_VALUATION bit NULL;
    END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'EXPENSE_ITEMS_ROWS' AND COLUMN_NAME = 'INVENTORY_ID')
    BEGIN
        ALTER TABLE EXPENSE_ITEMS_ROWS ADD INVENTORY_ID int NULL;
    END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'BANK_ACTIONS' AND COLUMN_NAME = 'BILL_ID')
    BEGIN
        ALTER TABLE BANK_ACTIONS ADD BILL_ID int NULL;
    END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'INVOICE' AND COLUMN_NAME = 'PAYMENT_COMPANY_ID')
    BEGIN
        ALTER TABLE INVOICE ADD PAYMENT_COMPANY_ID int NULL;
    END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'INVOICE' AND COLUMN_NAME = 'IS_CREDITCARD')
    BEGIN
        ALTER TABLE INVOICE ADD IS_CREDITCARD bit NULL;
    END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'SHIP_INTERNAL_ROW' AND COLUMN_NAME = 'AMOUNT2')
    BEGIN
        ALTER TABLE SHIP_INTERNAL_ROW ADD AMOUNT2 float NULL;
    END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME = 'SHIP_INTERNAL_ROW' AND COLUMN_NAME = 'UNIT2')
    BEGIN
        ALTER TABLE SHIP_INTERNAL_ROW ADD UNIT2 nvarchar(50) NULL;
    END;
    IF NOT EXISTS ( SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = '@_dsn_period_@' AND TABLE_NAME='EINVOICE_NUMBER')
    BEGIN
        CREATE TABLE [EINVOICE_NUMBER](	  [ID] int NOT NULL IDENTITY(1,1)	, [EINVOICE_PREFIX] nvarchar(50) NOT NULL	, [EINVOICE_NUMBER] nvarchar(50) NULL);
    END;
</querytag>