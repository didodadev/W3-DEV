<!-- Description : INVENTORY tablosuna ifrs faydalı ömür eklendi.
Developer: Cemil Durgan
Company : Durgan Bilişim
Destination: Company -->
<querytag>
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'INVENTORY' AND TABLE_SCHEMA = '@_dsn_company_@' AND COLUMN_NAME = 'INVENTORY_DURATION_IFRS')
        BEGIN
            ALTER TABLE INVENTORY ADD INVENTORY_DURATION_IFRS INT
        END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'INVENTORY' AND TABLE_SCHEMA = '@_dsn_company_@' AND COLUMN_NAME = 'AMORT_LAST_VALUE_IFRS')
        BEGIN
            ALTER TABLE INVENTORY ADD AMORT_LAST_VALUE_IFRS FLOAT
        END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'INVENTORY' AND TABLE_SCHEMA = '@_dsn_company_@' AND COLUMN_NAME = 'LAST_INVENTORY_VALUE_IFRS')
        BEGIN
            ALTER TABLE INVENTORY ADD LAST_INVENTORY_VALUE_IFRS FLOAT
        END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'INVENTORY' AND TABLE_SCHEMA = '@_dsn_company_@' AND COLUMN_NAME = 'LAST_INVENTORY_VALUE_2_IFRS')
        BEGIN
            ALTER TABLE INVENTORY ADD LAST_INVENTORY_VALUE_2_IFRS FLOAT
        END;
    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'INVENTORY' AND TABLE_SCHEMA = '@_dsn_company_@' AND COLUMN_NAME = 'AMORTIZATION_COUNT_IFRS')
        BEGIN
            ALTER TABLE INVENTORY ADD AMORTIZATION_COUNT_IFRS INT
        END;

    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'INVENTORY_AMORTIZATON_IFRS' AND TABLE_SCHEMA = '@_dsn_company_@')
    BEGIN
        CREATE TABLE [INVENTORY_AMORTIZATON_IFRS](
            [AMORTIZATION_ID] [int] IDENTITY(1,1) NOT NULL,
            [INVENTORY_ID] [int] NULL,
            [AMORTIZATON_VALUE] [float] NULL,
            [AMORTIZATON_METHOD] [int] NULL,
            [AMORTIZATON_YEAR] [int] NULL,
            [AMORTIZATON_INV_VALUE] [float] NULL,
            [AMORTIZATON_ESTIMATE] [float] NULL,
            [CLAIM_ACCOUNT_ID] [nvarchar](50) NULL,
            [DEBT_ACCOUNT_ID] [nvarchar](50) NULL,
            [INV_AMORT_MAIN_ID] [int] NULL,
            [PERIODIC_AMORT_VALUE] [float] NULL,
            [ACCOUNT_PERIOD] [int] NULL,
            [INV_QUANTITY] [float] NULL,
            [PARTIAL_AMORTIZATION_VALUE] [float] NULL,
        CONSTRAINT [PK_INVENTORY_AMORTIZATON_IFRS_AMORTIZATION_ID] PRIMARY KEY CLUSTERED 
        (
            [AMORTIZATION_ID] ASC
        )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
        ) ON [PRIMARY]
    END;


    IF NOT EXISTS (SELECT 'Y' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'INVENTORY_AMORTIZATION_MAIN' AND TABLE_SCHEMA = '@_dsn_company_@' AND COLUMN_NAME = 'ACCOUNTING_TYPE')
        BEGIN
            ALTER TABLE INVENTORY_AMORTIZATION_MAIN ADD ACCOUNTING_TYPE INT NULL CONSTRAINT df_accounting DEFAULT ((0))
        END;
</querytag>
