<cfquery name="GET_TOTAL_PERF_TARGETS" datasource="#dsn#">
	SELECT 
		TARGET_CAT.TARGETCAT_NAME
		,TARGET.TARGET_ID   
		,TARGET.TARGETCAT_ID 
		,TARGET.POSITION_CODE 

		,TARGET.STARTDATE    
		,TARGET.FINISHDATE   
		,TARGET.TARGET_HEAD  
		,TARGET.TARGET_DETAIL
		,TARGET.TARGET_NUMBER

		,TARGET.PERFORM_COMMENT 
		,TARGET.PERFORM_POINT_ID
		,TARGET.PERFORM_REC_EMP 
		,TARGET.PERFORM_REC_DATE 
	FROM 
		TARGET, TARGET_CAT 
	WHERE 
		TARGET.TARGETCAT_ID = TARGET_CAT.TARGETCAT_ID
		AND
		POSITION_CODE IS NOT NULL
		AND
		POSITION_CODE IN (SELECT POSITION_CODE FROM EMPLOYEE_POSITIONS WHERE EMPLOYEE_ID = #attributes.employee_id#)
		AND
		(FINISHDATE BETWEEN #firstdate# AND #lastdate#)
	<cfif isDefined("attributes.keyword")>
		AND
		TARGET_HEAD LIKE '%#attributes.keyword#%'
	</cfif>
</cfquery>
