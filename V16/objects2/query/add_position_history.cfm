<!--- son halini history ye ekle --->
<cfquery name="GET_NEW_POS_ROW" datasource="#new_dsn#">
	SELECT * FROM EMPLOYEE_POSITIONS WHERE POSITION_ID = <cfqueryparam cfsqltype="cf_sql_integer" value="#history_position_id#">
</cfquery>

<cfquery name="ADD_TO_HISTORY" datasource="#new_dsn#">
	INSERT INTO
		EMPLOYEE_POSITIONS_HISTORY
	(
		IN_COMPANY_REASON_ID,
		POSITION_ID,
		POSITION_CAT_ID,
		T_ID,
		UPPER_POSITION_CODE,
		UPPER_POSITION_CODE2,
		IS_MASTER,
		POSITION_CODE,
		EMPLOYEE_ID,
		EMPLOYEE_NAME,
		EMPLOYEE_SURNAME,
		EMPLOYEE_EMAIL,
		POSITION_NAME,
		POSITION_STATUS,
		DETAIL,
		DEPARTMENT_ID,
		LEVEL_ID,
		USER_GROUP_ID,
		VALID,
		VALID_MEMBER,
		VALIDATOR_MEMBER,
		VALID_DATE,
		POS_ENT_DETAIL,
		EHESAP,
		IS_VEKALETEN,
		VEKALETEN_DATE,
		TITLE_ID,
		HIERARCHY,
		DYNAMIC_HIERARCHY,
		DYNAMIC_HIERARCHY_ADD,
		ADMIN_STATUS,
		OZEL_KOD,
		IS_CRITICAL,
		ORGANIZATION_STEP_ID,
		IS_ORG_VIEW,
		COLLAR_TYPE,
		RECORD_EMP,
		RECORD_IP,
		RECORD_DATE,
		FUNC_ID
	)
	VALUES
	(
		<cfif len(GET_NEW_POS_ROW.IN_COMPANY_REASON_ID)>#GET_NEW_POS_ROW.IN_COMPANY_REASON_ID#,<cfelse>NULL,</cfif>
		#GET_NEW_POS_ROW.POSITION_ID#,
		#GET_NEW_POS_ROW.POSITION_CAT_ID#,
		<cfif len(GET_NEW_POS_ROW.T_ID)>#GET_NEW_POS_ROW.T_ID#,<cfelse>NULL,</cfif>
		<cfif len(GET_NEW_POS_ROW.UPPER_POSITION_CODE)>#GET_NEW_POS_ROW.UPPER_POSITION_CODE#<cfelse>NULL</cfif>,
		<cfif len(GET_NEW_POS_ROW.UPPER_POSITION_CODE2)>#GET_NEW_POS_ROW.UPPER_POSITION_CODE2#<cfelse>NULL</cfif>,
		<cfif GET_NEW_POS_ROW.IS_MASTER eq 1>1<cfelse>0</cfif>,
		#GET_NEW_POS_ROW.POSITION_CODE#,
		<cfif len(GET_NEW_POS_ROW.EMPLOYEE_ID)>#GET_NEW_POS_ROW.EMPLOYEE_ID#<cfelse>NULL</cfif>, 
		'#GET_NEW_POS_ROW.EMPLOYEE_NAME#',
		'#GET_NEW_POS_ROW.EMPLOYEE_SURNAME#',
		'#GET_NEW_POS_ROW.EMPLOYEE_EMAIL#',
		'#GET_NEW_POS_ROW.POSITION_NAME#',
		<cfif GET_NEW_POS_ROW.POSITION_STATUS eq 1>1,<cfelse>0,</cfif>
		'#GET_NEW_POS_ROW.DETAIL#',
		#GET_NEW_POS_ROW.DEPARTMENT_ID#,
		'#GET_NEW_POS_ROW.LEVEL_ID#',
		<cfif len(GET_NEW_POS_ROW.USER_GROUP_ID)>#GET_NEW_POS_ROW.USER_GROUP_ID#<cfelse>NULL</cfif>,
		<cfif len(GET_NEW_POS_ROW.VALID)>#GET_NEW_POS_ROW.VALID#,<cfelse>NULL,</cfif>
		<cfif len(GET_NEW_POS_ROW.VALID_MEMBER)>#GET_NEW_POS_ROW.VALID_MEMBER#,<cfelse><cfif len(GET_NEW_POS_ROW.UPDATE_EMP)>#GET_NEW_POS_ROW.UPDATE_EMP#,<cfelse>NULL,</cfif></cfif>
		<cfif len(GET_NEW_POS_ROW.VALIDATOR_MEMBER)>#GET_NEW_POS_ROW.VALIDATOR_MEMBER#,<cfelse>NULL,</cfif>
		<cfif len(GET_NEW_POS_ROW.VALID_DATE)>#createodbcdatetime(GET_NEW_POS_ROW.VALID_DATE)#,<cfelse><cfif len(GET_NEW_POS_ROW.UPDATE_DATE)>#createodbcdatetime(GET_NEW_POS_ROW.UPDATE_DATE)#,<cfelse>NULL,</cfif></cfif>
		'#GET_NEW_POS_ROW.POS_ENT_DETAIL#',
		<cfif GET_NEW_POS_ROW.EHESAP eq 1>1<cfelse>0</cfif>,
		<cfif GET_NEW_POS_ROW.IS_VEKALETEN eq 1>1<cfelse>0</cfif>,
		<cfif len(GET_NEW_POS_ROW.VEKALETEN_DATE)>#createodbcdatetime(GET_NEW_POS_ROW.VEKALETEN_DATE)#,<cfelse>NULL,</cfif>
		<cfif len(GET_NEW_POS_ROW.TITLE_ID)>#GET_NEW_POS_ROW.TITLE_ID#<cfelse>NULL</cfif>,
		'#GET_NEW_POS_ROW.HIERARCHY#',
		'#GET_NEW_POS_ROW.DYNAMIC_HIERARCHY#',
		'#GET_NEW_POS_ROW.DYNAMIC_HIERARCHY_ADD#',
		<cfif GET_NEW_POS_ROW.ADMIN_STATUS eq 1>1<cfelse>0</cfif>,
		'#GET_NEW_POS_ROW.OZEL_KOD#',
		<cfif GET_NEW_POS_ROW.IS_CRITICAL eq 1>1<cfelse>0</cfif>,
		<cfif len(GET_NEW_POS_ROW.ORGANIZATION_STEP_ID)>#GET_NEW_POS_ROW.ORGANIZATION_STEP_ID#<cfelse>NULL</cfif>,
		<cfif GET_NEW_POS_ROW.IS_ORG_VIEW eq 1>1<cfelse>0</cfif>,
		<cfif len(GET_NEW_POS_ROW.COLLAR_TYPE)>#GET_NEW_POS_ROW.COLLAR_TYPE#<cfelse>NULL</cfif>,
		#LAST_ID.LATEST_RECORD_ID#,
		'#CGI.REMOTE_ADDR#',
		#NOW()#,
		<cfif len(GET_NEW_POS_ROW.FUNC_ID)>#GET_NEW_POS_ROW.FUNC_ID#<cfelse>NULL</cfif>
	)
</cfquery>
